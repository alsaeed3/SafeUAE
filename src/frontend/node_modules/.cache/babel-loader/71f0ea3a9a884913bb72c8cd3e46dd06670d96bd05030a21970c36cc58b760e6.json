{"ast":null,"code":"var _jsxFileName = \"/home/alsaeed/Desktop/SafeUAE/src/frontend/src/components/Dashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DashboardContainer = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 20px;\n  padding: 20px;\n`;\n_c = DashboardContainer;\nconst AlertSection = styled.div`\n  background: #fff;\n  border-radius: 8px;\n  padding: 15px;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n`;\n_c2 = AlertSection;\nconst ResourceSection = styled.div`\n  background: #fff;\n  border-radius: 8px;\n  padding: 15px;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n`;\n_c3 = ResourceSection;\nconst Dashboard = () => {\n  _s();\n  const [alerts, setAlerts] = useState([]);\n  const [resources, setResources] = useState({});\n  const [wsStatus, setWsStatus] = useState('disconnected');\n  const connectWebSocket = useCallback(() => {\n    const ws = new W3CWebSocket('ws://localhost:8000/ws');\n    ws.onopen = () => {\n      setWsStatus('connected');\n      console.log('WebSocket Connected');\n    };\n    ws.onclose = () => {\n      setWsStatus('disconnected');\n      console.log('WebSocket Disconnected');\n      // Attempt to reconnect after 5 seconds\n      setTimeout(connectWebSocket, 5000);\n    };\n    ws.onmessage = message => {\n      try {\n        const data = JSON.parse(message.data);\n        if (data.type === 'alert') {\n          setAlerts(prev => [...prev.slice(-9), data]); // Keep last 10 alerts\n        } else if (data.type === 'resource') {\n          setResources(data.resources);\n        }\n      } catch (error) {\n        console.error('WebSocket message parsing error:', error);\n      }\n    };\n    ws.onerror = error => {\n      console.error('WebSocket Error:', error);\n      setWsStatus('error');\n    };\n    return ws;\n  }, []);\n  useEffect(() => {\n    const ws = connectWebSocket();\n    return () => {\n      ws.close();\n    };\n  }, [connectWebSocket]);\n  return /*#__PURE__*/_jsxDEV(DashboardContainer, {\n    children: [/*#__PURE__*/_jsxDEV(AlertSection, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"System Alerts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Connection Status: \", wsStatus]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), alerts.map((alert, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: alert.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: new Date(alert.timestamp).toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ResourceSection, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"System Resources\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), Object.entries(resources).map(([key, value]) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [key, \": \", value, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"progress\", {\n          value: value,\n          max: \"100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"pnSpf7KTpRv/2u4h361h/GSyzJ8=\");\n_c4 = Dashboard;\nexport default Dashboard;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"DashboardContainer\");\n$RefreshReg$(_c2, \"AlertSection\");\n$RefreshReg$(_c3, \"ResourceSection\");\n$RefreshReg$(_c4, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","w3cwebsocket","W3CWebSocket","styled","jsxDEV","_jsxDEV","DashboardContainer","div","_c","AlertSection","_c2","ResourceSection","_c3","Dashboard","_s","alerts","setAlerts","resources","setResources","wsStatus","setWsStatus","connectWebSocket","ws","onopen","console","log","onclose","setTimeout","onmessage","message","data","JSON","parse","type","prev","slice","error","onerror","close","children","fileName","_jsxFileName","lineNumber","columnNumber","map","alert","index","Date","timestamp","toLocaleString","Object","entries","key","value","max","_c4","$RefreshReg$"],"sources":["/home/alsaeed/Desktop/SafeUAE/src/frontend/src/components/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\nimport styled from 'styled-components';\n\nconst DashboardContainer = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 20px;\n  padding: 20px;\n`;\n\nconst AlertSection = styled.div`\n  background: #fff;\n  border-radius: 8px;\n  padding: 15px;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n`;\n\nconst ResourceSection = styled.div`\n  background: #fff;\n  border-radius: 8px;\n  padding: 15px;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n`;\n\nconst Dashboard = () => {\n  const [alerts, setAlerts] = useState([]);\n  const [resources, setResources] = useState({});\n  const [wsStatus, setWsStatus] = useState('disconnected');\n\n  const connectWebSocket = useCallback(() => {\n    const ws = new W3CWebSocket('ws://localhost:8000/ws');\n\n    ws.onopen = () => {\n      setWsStatus('connected');\n      console.log('WebSocket Connected');\n    };\n\n    ws.onclose = () => {\n      setWsStatus('disconnected');\n      console.log('WebSocket Disconnected');\n      // Attempt to reconnect after 5 seconds\n      setTimeout(connectWebSocket, 5000);\n    };\n\n    ws.onmessage = (message) => {\n      try {\n        const data = JSON.parse(message.data);\n        if (data.type === 'alert') {\n          setAlerts(prev => [...prev.slice(-9), data]); // Keep last 10 alerts\n        } else if (data.type === 'resource') {\n          setResources(data.resources);\n        }\n      } catch (error) {\n        console.error('WebSocket message parsing error:', error);\n      }\n    };\n\n    ws.onerror = (error) => {\n      console.error('WebSocket Error:', error);\n      setWsStatus('error');\n    };\n\n    return ws;\n  }, []);\n\n  useEffect(() => {\n    const ws = connectWebSocket();\n    return () => {\n      ws.close();\n    };\n  }, [connectWebSocket]);\n\n  return (\n    <DashboardContainer>\n      <AlertSection>\n        <h2>System Alerts</h2>\n        <div>Connection Status: {wsStatus}</div>\n        {alerts.map((alert, index) => (\n          <div key={index}>\n            <p>{alert.message}</p>\n            <small>{new Date(alert.timestamp).toLocaleString()}</small>\n          </div>\n        ))}\n      </AlertSection>\n      <ResourceSection>\n        <h2>System Resources</h2>\n        {Object.entries(resources).map(([key, value]) => (\n          <div key={key}>\n            <p>{key}: {value}%</p>\n            <progress value={value} max=\"100\" />\n          </div>\n        ))}\n      </ResourceSection>\n    </DashboardContainer>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}